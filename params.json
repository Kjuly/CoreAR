{"note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"AR(Augmented reality) framework for iOS, based on a visual code like ARToolKit","name":"CoreAR","body":"CoreAR.framework\r\n=======\r\n![](http://sonson.jp/wp/wp-content/uploads/2011/04/coreARSample.png)\r\n\r\nIntroduction and information\r\n=======\r\nCoreAR.framework is open source AR framework. You can make an AR application using visual code like ARToolKit using this framework. CoreAR.framework does not depend on the other computer vision library like OpenCV. Considered portability, this framework is written only C or C++. The pixel array of an image is passed to CoreAR.framework and then visual code's identification number, rotation and translation matrix are obtained from the image including a visual code. Image processing speed of this framework is about 15 fps on iPhone4.\r\n\r\nTake notice that CoreAR.framework depends on [Quartz Help Library][] and [Real time image processing framework for iOS][]. You have to download these libraries and put on them at the path where CoreAR.framework has been installed.\r\n\r\nLicense\r\n=======\r\n[BSD License][].\r\n\r\nApp Store\r\n=======\r\nYou can take a sample application from [App Store][].\r\n\r\nSample code in C++\r\n=======\r\n\r\n\tfloat codeSize = 1;\r\n\tint croppingSize = 64;\r\n\tint threshold = 100;\r\n\tint width = (int)bufferSize.width;\r\n\tint height = (int)bufferSize.height;\r\n\r\n\t// do it\r\n\tif (chaincodeBuff == NULL)\r\n\t\tchaincodeBuff = (unsigned char*)malloc(sizeof(unsigned char) * width * height);\r\n\r\n\t// binarize for chain code\r\n\tfor (int y = 0; y < height; y++)\r\n\t\tfor (int x = 0; x < width; x++)\r\n\t\t\t*(chaincodeBuff + x + y * width) = *(buffer + x + y * width) < threshold ? CRChainCodeFlagUnchecked : CRChainCodeFlagIgnore;\r\n\r\n\t// prepare to parse chain code\r\n\tCRChainCode *chaincode = new CRChainCode();\r\n\tchaincode->parsePixel(chaincodeBuff, width, height);\r\n\r\n\t// clear previous buffer\r\n\tCRCodeList::iterator it = codeListRef->begin();\r\n\twhile(it != codeListRef->end()) {\r\n\t\tSAFE_DELETE(*it);\r\n\t\t++it;\r\n\t}\r\n\tcodeListRef->clear();\r\n\r\n\t// reload detected codes\r\n\tif (!chaincode->blobs->empty()) {\r\n\t\tstd::list<CRChainCodeBlob*>::iterator blobIterator = chaincode->blobs->begin();\r\n\t\twhile(blobIterator != chaincode->blobs->end()) {\r\n\t\t\tif (!(*blobIterator)->isValid(width, height)) {\r\n\t\t\t\tblobIterator++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tCRCode *code = (*blobIterator)->code();\t\r\n\t\t\tif(code) {\r\n\t\t\t\t// estimate and optimize pose and position\r\n\t\t\t\tcode->normalizeCornerForImageCoord(width, height, focalLength, focalLength);\r\n\t\t\t\tcode->getSimpleHomography(codeSize);\r\n\t\t\t\tcode->optimizeRTMatrinxWithLevenbergMarquardtMethod();\r\n\t\t\t\t\r\n\t\t\t\t// cropping code image area\r\n\t\t\t\tcode->crop(croppingSize, croppingSize, focalLength, focalLength, codeSize, buffer, width, height);\r\n\t\t\t\tcodeListRef->push_back(code);\r\n\t\t\t}\r\n\t\t\tblobIterator++;\r\n\t\t}\r\n\t}\r\n\r\nSample code in C (depracted)\r\n=======\r\n\r\n\t// Copy image buffer from camera into \"pixel\".\r\n\tint width;\r\n\tint height;\r\n\tunsigned char *pixel = (unsigned char*)malloc(sizeof(unsigned char) * width * height);\r\n\t\r\n\t// codeInfoStorage receives the result of visual code recognition.\r\n\tCRCodeInfoStorage *codeInfoStorage = CRCreateCodeInfoStorage();\r\n\t\r\n\t// storage to save visual code templates.\r\n\tCRCodeImageTemplate *codeImageTemplateStorage = CRCreateCodeImageTemplateStorage();\r\n\t\r\n\t// make template to recognize visual codes.\r\n\tint c_width;\r\n\tint c_height;\r\n\tunsigned char *c_p = (unsigned char*)malloc(sizeof(unsigned char) * c_width * c_height);\r\n\t\r\n\t/* read images of visual codes you want to recognize */\r\n\t\r\n\tCRCodeImageTemplate *template = CRCreateCodeImageTemplate(c_p, c_width, c_height);\r\n\ttemplate->code = codeNumber;\r\n\ttemplate->size = codeSize;\r\n\tCRCodeImageTemplateStorageAddNewTemplate(codeImageTemplateStorage, template);\r\n\tfree(c_p);\r\n\t\r\n\t// Start extraction\r\n\tCRChainCodeStorage *storage = CRCreateChainCodeStorageByParsingPixel(pixel, width, height);\r\n\tCRChainCodeStorageDetectCornerWithLSM(storage);\r\n\tCRCodeInfoStorageAddCodeInfoByExtractingFromChainCode(codeInfoStorage, storage, valueBuffer, width, height, codeImageTemplateStorage);\r\n\t\r\n\t// Release\r\n\tCRReleaseChainCodeStorage(&storage);\r\n\tCRReleaseCodeInfoStorage(&codeInfoStorage);\r\n\tfree(pixel);\r\n\r\nFrequently Asked Questions\r\n=======\r\n * I can't compile CoreAR.framework...\r\n   * Ans. CoreAR.framework depends on [Quartz Help Library][] and [Real time image processing framework for iOS][]. You have to download these libraries and put on them at the path where CoreAR.framework has been installed.\r\n   \r\n * How do I render a 3D model on the code with CoreAR.framework?\r\n   * Ans. CoreAR.framework does not support rendering any 3D model files. You have to write a code to render 3D model files with OpenGLES. Sample program does not render a cube and Utah teapot with 3D model files but with OpenGLES code.\r\n\r\nBlog\r\n=======\r\n * [sonson.jp][]\r\nSorry, Japanese only....\r\n\r\nDependency\r\n=======\r\n * [Quartz Help Library][]\r\n * [Real time image processing framework for iOS][]\r\n \r\nAcknowledgement\r\n=======\r\n * [DENSO IT Laboratory, Inc.][] has supported my work.\r\n * There are some public projects supported by [DENSO IT Laboratory, Inc.][] in [cvlab.jp][].\r\n\r\n[cvlab.jp]: http://cvlab.jp/\r\n[DENSO IT Laboratory, Inc.]: http://www.d-itlab.co.jp/\r\n[App Store]: http://click.linksynergy.com/fs-bin/click?id=he6amglY4cw&subid=&offerid=94348.1&type=10&tmpid=3910&RD_PARM1=http%3A%2F%2Fitunes.apple.com%2Fus%2Fapp%2Fcorear%2Fid428844303%3Fmt%3D8%2526ls%3D1\r\n[sonson.jp]: http://sonson.jp\r\n[BSD License]: http://www.opensource.org/licenses/bsd-license.php\r\n[Quartz Help Library]: https://github.com/sonsongithub/Quartz-Help-Library\r\n[Real time image processing framework for iOS]: https://github.com/sonsongithub/iOSCameraImageProcessing","google":""}